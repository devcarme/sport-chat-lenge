(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var s=n(15),i=n(16),o=n(18),a=n(17),r=n(1),c=n(12),u=n(0),d=n(26),l=n.n(d),h=n(6),j=n(19),p=n(64),b=n(63),f=n(39),m=(n(29),n(21),n(7)),O=n.n(m),x=n.p+"static/media/chatsport.f5198b02.png",y=n(65),g=n(66),v=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={pseudo:"",password:"",error:""},e.handleChangePseudo=function(t){e.setState({pseudo:t.currentTarget.value})},e.handleChangePassword=function(t){e.setState({password:t.currentTarget.value})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.pseudo,s=e.state.password;e.props.onLogin({pseudo:n,password:s})},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsxs)(y.a,{onSubmit:this.handleSubmit,children:[Object(r.jsxs)(y.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)(y.a.Control,{type:"text",placeholder:"Pseudo",required:!0,value:this.state.pseudo,onChange:this.handleChangePseudo,autoComplete:"on"}),Object(r.jsx)(y.a.Text,{className:"text-muted"})]}),Object(r.jsx)(y.a.Group,{controlId:"formBasicPassword",children:Object(r.jsx)(y.a.Control,{type:"password",placeholder:"Mot de passe",required:!0,value:this.state.password,onChange:this.handleChangePassword,autoComplete:"on"})}),Object(r.jsx)(b.a,{children:Object(r.jsx)(f.a,{xs:{span:8,offset:2},md:{span:8,offset:2},sm:{span:8,offset:2},lg:{span:9,offset:2},xl:{span:8,offset:2},children:Object(r.jsx)(g.a,{variant:"primary btn-block",type:"submit",className:"button",children:"Connexion"})})})]})})}}]),n}(u.Component),Q=function(e){var t=e.details;return Object(r.jsx)("option",{value:t.idQuestionnaire,children:t.nomQuestionnaire})};var S=function(e){var t=Object(h.f)(),n=Object(u.useState)(""),s=Object(c.a)(n,2),i=s[0],o=s[1],a=Object(u.useState)([]),d=Object(c.a)(a,2),l=d[0],j=d[1];return Object(u.useEffect)((function(){fetch(O.a.url+"getAllQuestionnaires").then((function(e){return e.json()})).then((function(e){return j(e)}))}),[]),Object(r.jsx)(p.a,{className:"h-100 mt-5",children:Object(r.jsx)(b.a,{className:"h-100 justify-content-center align-items-center",children:Object(r.jsx)(y.a,{onSubmit:function(e){t.push("questionnaire/"+i)},children:Object(r.jsxs)(y.a.Group,{controlId:"exampleForm.ControlSelect1",className:"col-12",children:[Object(r.jsx)("h3",{children:"Choisir un questionnaire"}),Object(r.jsxs)(y.a.Control,{as:"select",required:!0,value:i,onChange:function(e){o(e.currentTarget.value)},children:[Object(r.jsx)("option",{defaultValue:!0,required:!0,value:"",hidden:!0,children:"Tous les questionnaires"}),l.map((function(e){return Object(r.jsx)(Q,{details:e},e.idQuestionnaire)}))]}),Object(r.jsx)(f.a,{children:Object(r.jsx)(g.a,{variant:"primary btn-block mt-3",type:"submit",className:"button",children:"Commencer"})})]})})})})},k=n(13),C=(n(25),n(55),n(20)),w=n(41),N=n.n(w),A=n(42),q=n.n(A);n(33);var T=function(e){var t=Object(u.useState)(null),n=Object(c.a)(t,2),s=(n[0],n[1]),i=function(t){var n={idQuestion:e.details.idQuestion,response:t.currentTarget.value};e.onChangeRadio(n)};return Object(u.useEffect)((function(){!function(){var t={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({idQuestion:e.details.idQuestion,idResponsesQuestions:e.idResponsesQuestions})};fetch(O.a.url+"getResponse",t).then((function(e){return e.json()})).then((function(t){t.ok&&(s(t.reponse),1===t.reponse?document.getElementById("custom-radio-1".concat(e.details.idQuestion)).checked=!0:0===t.reponse&&(document.getElementById("custom-radio-2".concat(e.details.idQuestion)).checked=!0))}))}()}),[]),Object(r.jsxs)("div",{className:"container",style:{backgroundColor:"white",padding:20,height:150},children:[Object(r.jsx)("h2",{children:e.details.texteQuestion}),Object(r.jsxs)("div",{className:"row justify-content-center",children:[Object(r.jsxs)("div",{className:"form-check",children:[Object(r.jsx)("input",{onClick:function(t){e.isAlreadyAnswered?t.preventDefault():(document.getElementById("custom-radio-1".concat(e.details.idQuestion)).checked=!0,document.getElementById("custom-radio-2".concat(e.details.idQuestion)).checked=!1,i(t))},className:"form-check-input",type:"radio",name:"radio-group".concat(e.details.idQuestion),id:"custom-radio-1".concat(e.details.idQuestion),value:"1"}),Object(r.jsx)("label",{className:"form-check-label",for:"custom-radio-1".concat(e.details.idQuestion),children:"Oui"})]}),Object(r.jsxs)("div",{className:"form-check ml-5",children:[Object(r.jsx)("input",{onClick:function(t){e.isAlreadyAnswered?t.preventDefault():(document.getElementById("custom-radio-2".concat(e.details.idQuestion)).checked=!0,document.getElementById("custom-radio-1".concat(e.details.idQuestion)).checked=!1,i(t))},class:"form-check-input",type:"radio",name:"radio-group".concat(e.details.idQuestion),id:"custom-radio-2".concat(e.details.idQuestion),value:"0"}),Object(r.jsx)("label",{className:"form-check-label",for:"custom-radio-2".concat(e.details.idQuestion),children:"Non"})]})]})]})},R=n(43),E=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).isAlreadyAnswered=function(e){var t={method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify({idQuestionnaire:e})};fetch(O.a.url+"isAlreadyAnswered",t).then((function(e){return e.json()})).then((function(e){return i.setState({isAlreadyAnswered:e.ok})}))},i.addResponse=function(e){var t=new Map;(t=i.state.responses).set(e.idQuestion,e.response),i.setState({responses:t})},i.handleClickCancel=function(){var e=i.props.history;e&&e.push("/questionnaires")},i.handleSubmit=function(e){e.preventDefault();var t=i.props.history,n=new Map;(n=i.state.responses).set("idQuestionnaire",i.state.idQuestionnaire);var s=Object.fromEntries(n);console.log(JSON.stringify(s));var o={method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(s)};fetch(O.a.url+"sendResponses",o).then((function(e){return e.json()})).then((function(e){e.ok&&t.push("/validationQuestionnaire")})).catch((function(e){console.log("Erreur :",e)}))},i.state={idQuestionnaire:0,questionsNumber:0,questions:[],questionnaire:[],index:1,responses:new Map,error:"",isAlreadyAnswered:!1,indexResponse:0,idResponsesQuestions:null},i}return Object(i.a)(n,[{key:"getQuestions",value:function(e){var t=this,n={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({idQuestionnaire:e})};fetch(O.a.url+"getQuestionsByQuestionnaire",n).then((function(e){return e.json()})).then((function(e){return t.setState({questions:e})}))}},{key:"getQuestionnaire",value:function(e){var t=this,n={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({idQuestionnaire:e})};fetch(O.a.url+"getQuestionnaire",n).then((function(e){return e.json()})).then((function(e){return t.setState({questionnaire:e})}))}},{key:"getQuestionsNumber",value:function(e){var t=this,n={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({idQuestionnaire:e})};fetch(O.a.url+"getQuestionsNumber",n).then((function(e){return e.json()})).then((function(e){return t.setState({questionsNumber:e.questionsNumber})}))}},{key:"getResponsesQuestions",value:function(e){var t=this,n={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({idQuestionnaire:e})};fetch(O.a.url+"getResponsesQuestions",n).then((function(e){return e.json()})).then((function(e){e.ok&&t.setState({idResponsesQuestions:e.idResponsesQuestions})}))}},{key:"componentDidMount",value:function(){var e=this.props.match.params;this.setState({idQuestionnaire:e.idQuestionnaire}),this.getResponsesQuestions(e.idQuestionnaire),this.getQuestions(e.idQuestionnaire),this.getQuestionnaire(e.idQuestionnaire),this.getQuestionsNumber(e.idQuestionnaire),this.isAlreadyAnswered(e.idQuestionnaire)}},{key:"render",value:function(){var e=this,t={position:"absolute",zIndex:2,top:"calc(50% - 15px)",width:30,height:30,cursor:"pointer",color:"yellow"},n={backgroundColor:"white",color:"yellow",width:8,height:8,display:"inline-block",margin:"0 8px"};return Object(r.jsx)("div",{className:"container",style:{backgroundColor:"white",padding:20,height:150},children:Object(r.jsxs)("div",{className:"row justify-content-center",children:[Object(r.jsxs)("h1",{children:["Questionnaire ",this.state.questionnaire.map((function(e){return e.nomQuestionnaire}))]}),Object(r.jsxs)(y.a,{onSubmit:this.handleSubmit,children:[Object(r.jsx)(R.Carousel,{renderArrowPrev:function(e,n,s){return n&&Object(r.jsx)("button",{type:"button",onClick:e,title:s,style:Object(k.a)(Object(k.a)({},t),{},{left:15,backgroundColor:"transparent",border:0}),children:Object(r.jsx)(C.Icon,{icon:q.a,style:{color:"#FED018",fontSize:"35px",filter:"drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25))"}})})},renderArrowNext:function(e,n,s){return n&&Object(r.jsx)("button",{type:"button",onClick:e,title:s,style:Object(k.a)(Object(k.a)({},t),{},{right:15,backgroundColor:"transparent",border:0}),children:Object(r.jsx)(C.Icon,{icon:N.a,style:{color:"#FED018",fontSize:"35px",filter:"drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25))"}})})},statusFormatter:function(e,t){return""},renderIndicator:function(e,t,s,i){return t?Object(r.jsx)("li",{style:Object(k.a)(Object(k.a)({},n),{},{background:"white"}),"aria-label":"Selected: ".concat(i," ").concat(s+1),title:"Selected: ".concat(i," ").concat(s+1)}):Object(r.jsx)("li",{style:n,onClick:e,onKeyDown:e,value:s,role:"button",tabIndex:0,title:"".concat(i," ").concat(s+1),"aria-label":"".concat(i," ").concat(s+1)},s)},children:this.state.questions.map((function(t){return Object(r.jsx)("div",{children:Object(r.jsx)(T,{details:t,onChangeRadio:e.addResponse,idResponsesQuestions:e.state.idResponsesQuestions,isAlreadyAnswered:e.state.isAlreadyAnswered},t.idQuestion)})}))}),""!==this.state.error?Object(r.jsx)("h2",{children:this.state.error}):Object(r.jsx)("h2",{}),Object(r.jsx)(g.a,{variant:"secondary",style:{float:"right"},onClick:this.handleClickCancel,children:"Annuler"}),this.state.responses.size!==this.state.questionsNumber||this.state.isAlreadyAnswered?Object(r.jsx)(g.a,{variant:"primary mr-5",type:"submit",className:"button",style:{float:"right",display:"none"},children:"Envoyer"}):Object(r.jsx)(g.a,{variant:"primary mr-5",type:"submit",className:"button",style:{float:"right"},children:"Envoyer"})]})]})})}}]),n}(u.Component),I=n(44),P=n.n(I);var J=function(e){var t=Object(h.f)();return Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row flex-column mt-5",children:Object(r.jsxs)("div",{className:"col-4 align-self-center text-center",children:[Object(r.jsx)("h2",{children:"R\xe9ponses envoy\xe9es"}),Object(r.jsx)(C.Icon,{icon:P.a,style:{"font-size":40},className:"mt-5"}),Object(r.jsx)(y.a,{onSubmit:function(){t.push("/questionnaires")},className:"mt-5",children:Object(r.jsx)(g.a,{variant:"primary",type:"submit",children:"Autre questionnaire"})})]})})})};function B(){var e=Object(h.f)(),t=Object(u.useState)([]),n=Object(c.a)(t,2),s=(n[0],n[1]),i=Object(u.useState)(""),o=Object(c.a)(i,2),a=o[0],d=o[1];return Object(u.useEffect)((function(){fetch(O.a.url+"getAllSportifs").then((function(e){return e.json()})).then((function(e){return s(e)}))}),[]),Object(r.jsx)(p.a,{children:Object(r.jsx)(b.a,{children:Object(r.jsx)(f.a,{xs:{span:8,offset:2},md:{span:6,offset:3},sm:{span:8,offset:2},lg:{span:4,offset:4},xl:{span:4,offset:4},children:Object(r.jsxs)(b.a,{className:"justify-content-center",children:[Object(r.jsx)("img",{src:x,alt:"Logo",width:"180",height:"148"}),""!==a?Object(r.jsx)("p",{className:"text-danger",children:a}):Object(r.jsx)("h2",{}),Object(r.jsx)(v,{onLogin:function(t){var n={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};fetch(O.a.url+"verifySportif",n).then((function(e){return e.json()})).then((function(t){t.ok?e.push("/questionnaires"):d(t.error)}))}})]})})})})}var F=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(r.jsx)(j.a,{children:Object(r.jsxs)(h.c,{children:[Object(r.jsx)(h.a,{exact:!0,path:"/",component:B}),Object(r.jsx)(h.a,{path:"/questionnaires",component:S}),Object(r.jsx)(h.a,{path:"/questionnaire/:idQuestionnaire",component:E}),Object(r.jsx)(h.a,{path:"/validationQuestionnaire",component:J})]})})}}]),n}(u.Component);l.a.render(Object(r.jsx)(F,{}),document.getElementById("root"))},7:function(e,t){e.exports={url:"https://sport-chatlenge.herokuapp.com/web/"}}},[[62,1,2]]]);
//# sourceMappingURL=main.da0a58ea.chunk.js.map